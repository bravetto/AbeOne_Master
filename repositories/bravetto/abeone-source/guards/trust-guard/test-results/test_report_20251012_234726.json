{
  "timestamp": "2025-10-12T23:47:26.429935",
  "test_results": {
    "unit_tests": {
      "suites": {
        "tests/unit/test_comprehensive_core.py": {
          "passed": 0,
          "failed": 0,
          "skipped": 0,
          "return_code": 1,
          "stdout": "============================= test session starts =============================\nplatform win32 -- Python 3.13.8, pytest-8.4.2, pluggy-1.6.0\nrootdir: C:\\Users\\jimmy\\.cursor\\trust-guard\nconfigfile: pyproject.toml\nplugins: anyio-4.11.0, asyncio-1.2.0, cov-7.0.0, json-report-1.5.0, metadata-3.1.1\nasyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function\ncollected 61 items\n\ntests\\unit\\test_comprehensive_core.py .........F..F.F....F....FFF....F.. [ 55%]\n.F......F..................                                              [100%]\n\n================================== FAILURES ===================================\n______________ TestHallucinationDetector.test_overconfident_text ______________\ntests\\unit\\test_comprehensive_core.py:99: in test_overconfident_text\n    assert \"overconfidence\" in result[\"description\"].lower() or \"overconfidence\" in str(result[\"evidence\"])\nE   assert ('overconfidence' in 'detection of false information presented as fact' or 'overconfidence' in \"['Overconfidence indicators: 2', 'Short response length']\")\nE    +  where 'detection of false information presented as fact' = <built-in method lower of str object at 0x000001EBD1E0CA50>()\nE    +    where <built-in method lower of str object at 0x000001EBD1E0CA50> = 'Detection of false information presented as fact'.lower\nE    +  and   \"['Overconfidence indicators: 2', 'Short response length']\" = str(['Overconfidence indicators: 2', 'Short response length'])\n__________________ TestHallucinationDetector.test_none_input __________________\ntests\\unit\\test_comprehensive_core.py:122: in test_none_input\n    assert result[\"score\"] == 0.0  # Should handle gracefully\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE   assert 0.2 == 0.0\n_________________ TestHallucinationDetector.test_empty_string _________________\ntests\\unit\\test_comprehensive_core.py:136: in test_empty_string\n    assert result[\"score\"] == 0.0\nE   assert 0.2 == 0.0\n___________________ TestDriftDetector.test_consistent_topic ___________________\ntests\\unit\\test_comprehensive_core.py:184: in test_consistent_topic\n    assert result[\"score\"] < 0.5  # Should be low drift\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE   assert 0.5 < 0.5\n______________________ TestBiasDetector.test_gender_bias ______________________\ntests\\unit\\test_comprehensive_core.py:230: in test_gender_bias\n    assert result[\"score\"] > 0.3  # Should detect bias\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE   assert 0.0 > 0.3\n______________________ TestBiasDetector.test_racial_bias ______________________\ntests\\unit\\test_comprehensive_core.py:238: in test_racial_bias\n    assert result[\"score\"] > 0.3  # Should detect bias\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE   assert 0.15 > 0.3\n_____________________ TestBiasDetector.test_economic_bias _____________________\ntests\\unit\\test_comprehensive_core.py:245: in test_economic_bias\n    assert result[\"score\"] > 0.3  # Should detect bias\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE   assert 0.15 > 0.3\n_________________ TestDeceptionDetector.test_evasive_language _________________\ntests\\unit\\test_comprehensive_core.py:289: in test_evasive_language\n    assert result[\"score\"] > 0.2  # Should detect some evasion\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE   assert 0.0 > 0.2\n______________ TestSecurityTheaterDetector.test_false_assurances ______________\ntests\\unit\\test_comprehensive_core.py:326: in test_false_assurances\n    assert result[\"score\"] > 0.3  # Should detect false assurances\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE   assert 0.0 > 0.3\n_________________ TestStubSyndromeDetector.test_stub_response _________________\ntests\\unit\\test_comprehensive_core.py:394: in test_stub_response\n    assert result[\"score\"] > 0.5  # Should detect stub syndrome\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE   assert 0.5 > 0.5\n============================== warnings summary ===============================\n..\\..\\AppData\\Local\\Packages\\PythonSoftwareFoundation.Python.3.13_qbz5n2kfra8p0\\LocalCache\\local-packages\\Python313\\site-packages\\pythonjsonlogger\\jsonlogger.py:11\n  C:\\Users\\jimmy\\AppData\\Local\\Packages\\PythonSoftwareFoundation.Python.3.13_qbz5n2kfra8p0\\LocalCache\\local-packages\\Python313\\site-packages\\pythonjsonlogger\\jsonlogger.py:11: DeprecationWarning: pythonjsonlogger.jsonlogger has been moved to pythonjsonlogger.json\n    warnings.warn(\n\n-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html\n--------------------------------- JSON report ---------------------------------\nreport saved to: /tmp/pytest_report.json\n=========================== short test summary info ===========================\nFAILED tests/unit/test_comprehensive_core.py::TestHallucinationDetector::test_overconfident_text\nFAILED tests/unit/test_comprehensive_core.py::TestHallucinationDetector::test_none_input\nFAILED tests/unit/test_comprehensive_core.py::TestHallucinationDetector::test_empty_string\nFAILED tests/unit/test_comprehensive_core.py::TestDriftDetector::test_consistent_topic\nFAILED tests/unit/test_comprehensive_core.py::TestBiasDetector::test_gender_bias\nFAILED tests/unit/test_comprehensive_core.py::TestBiasDetector::test_racial_bias\nFAILED tests/unit/test_comprehensive_core.py::TestBiasDetector::test_economic_bias\nFAILED tests/unit/test_comprehensive_core.py::TestDeceptionDetector::test_evasive_language\nFAILED tests/unit/test_comprehensive_core.py::TestSecurityTheaterDetector::test_false_assurances\nFAILED tests/unit/test_comprehensive_core.py::TestStubSyndromeDetector::test_stub_response\n================== 10 failed, 51 passed, 1 warning in 0.79s ===================\n",
          "stderr": ""
        },
        "tests/unit/test_comprehensive_validation.py": {
          "passed": 0,
          "failed": 0,
          "skipped": 0,
          "return_code": 1,
          "stdout": "============================= test session starts =============================\nplatform win32 -- Python 3.13.8, pytest-8.4.2, pluggy-1.6.0\nrootdir: C:\\Users\\jimmy\\.cursor\\trust-guard\nconfigfile: pyproject.toml\nplugins: anyio-4.11.0, asyncio-1.2.0, cov-7.0.0, json-report-1.5.0, metadata-3.1.1\nasyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function\ncollected 41 items\n\ntests\\unit\\test_comprehensive_validation.py .F..FFFF..FFFFFFF...FFFFFFFF [ 68%]\nFFFFFFFFFFFFF                                                            [100%]\n\n================================== FAILURES ===================================\n____________ TestSafeTextInputValidation.test_various_input_types _____________\ntests\\unit\\test_comprehensive_validation.py:39: in test_various_input_types\n    assert result == expected\nE   AssertionError: assert 'string' == 'hello'\nE     \nE     - hello\nE     + string\n______ TestValidationEngine.test_perform_mathematical_validation_normal _______\ntests\\unit\\test_comprehensive_validation.py:75: in test_perform_mathematical_validation_normal\n    assert \"statistical_analysis\" in result\nE   AssertionError: assert 'statistical_analysis' in {'confidence_intervals': {'complexity_ci': {'lower': 0.7, 'upper': 1.1}, 'consistency_ci': {'lower': 0.9, 'upper': 1.0...s': {'avg_sentence_length': 8, 'lexical_diversity': 1.0, 'sentence_count': 2, 'sentence_length_variance': 0, ...}, ...}\n____ TestValidationEngine.test_perform_mathematical_validation_none_inputs ____\ntests\\unit\\test_comprehensive_validation.py:95: in test_perform_mathematical_validation_none_inputs\n    assert \"overall_score\" in result\nE   AssertionError: assert 'overall_score' in {'confidence_intervals': {'complexity_ci': {'lower': 0.7, 'upper': 1.1}, 'consistency_ci': {'lower': 0.9, 'upper': 1.0...ics': {'avg_sentence_length': 0, 'lexical_diversity': 0, 'sentence_count': 1, 'sentence_length_variance': 0, ...}, ...}\n------------------------------ Captured log call ------------------------------\nWARNING  trustguard.validation:validation.py:278 KL divergence calculation failed: 'NoneType' object has no attribute 'lower'\nWARNING  trustguard.validation:validation.py:375 Consistency check failed: 'NoneType' object has no attribute 'lower'\n__ TestValidationEngine.test_perform_mathematical_validation_integer_inputs ___\ntests\\unit\\test_comprehensive_validation.py:104: in test_perform_mathematical_validation_integer_inputs\n    assert \"overall_score\" in result\nE   AssertionError: assert 'overall_score' in {'confidence_intervals': {'complexity_ci': {'lower': 0.7, 'upper': 1.1}, 'consistency_ci': {'lower': 0.9, 'upper': 1.0...s': {'avg_sentence_length': 1, 'lexical_diversity': 1.0, 'sentence_count': 1, 'sentence_length_variance': 0, ...}, ...}\n------------------------------ Captured log call ------------------------------\nWARNING  trustguard.validation:validation.py:278 KL divergence calculation failed: 'int' object has no attribute 'lower'\nWARNING  trustguard.validation:validation.py:375 Consistency check failed: 'int' object has no attribute 'lower'\n___ TestValidationEngine.test_perform_mathematical_validation_empty_strings ___\ntests\\unit\\test_comprehensive_validation.py:112: in test_perform_mathematical_validation_empty_strings\n    assert \"overall_score\" in result\nE   AssertionError: assert 'overall_score' in {'confidence_intervals': {'complexity_ci': {'lower': 0.7, 'upper': 1.1}, 'consistency_ci': {'lower': 0.9, 'upper': 1.0...ics': {'avg_sentence_length': 0, 'lexical_diversity': 0, 'sentence_count': 1, 'sentence_length_variance': 0, ...}, ...}\n------------------------------ Captured log call ------------------------------\nWARNING  trustguard.validation:validation.py:375 Consistency check failed: division by zero\n_________ TestValidationEngine.test_calculate_risk_assessment_normal __________\ntests\\unit\\test_comprehensive_validation.py:145: in test_calculate_risk_assessment_normal\n    assert \"overall_score\" in result\nE   AssertionError: assert 'overall_score' in {'components': {'bias': {'risk_level': 'unknown', 'score': 0.2, 'weighted_score': 0.027999999999999997}, 'deception': ....3, 'weighted_score': 0.06}}, 'description': 'Minimal AI reliability concerns detected', 'level': 'low', 'score': 10.6}\n_______ TestValidationEngine.test_calculate_risk_assessment_none_input ________\ntests\\unit\\test_comprehensive_validation.py:162: in test_calculate_risk_assessment_none_input\n    assert \"overall_score\" in result\nE   AssertionError: assert 'overall_score' in {'components': {}, 'description': 'No patterns detected', 'level': 'low', 'score': 0.0}\n_______ TestValidationEngine.test_calculate_risk_assessment_empty_dict ________\ntests\\unit\\test_comprehensive_validation.py:171: in test_calculate_risk_assessment_empty_dict\n    assert \"overall_score\" in result\nE   AssertionError: assert 'overall_score' in {'components': {}, 'description': 'No patterns detected', 'level': 'low', 'score': 0.0}\n_______ TestValidationEngine.test_calculate_risk_assessment_high_scores _______\ntests\\unit\\test_comprehensive_validation.py:186: in test_calculate_risk_assessment_high_scores\n    assert result[\"overall_score\"] > 5.0  # Should be high score\n           ^^^^^^^^^^^^^^^^^^^^^^^\nE   KeyError: 'overall_score'\n______ TestValidationEngine.test_calculate_risk_assessment_mixed_scores _______\ntests\\unit\\test_comprehensive_validation.py:200: in test_calculate_risk_assessment_mixed_scores\n    assert \"overall_score\" in result\nE   AssertionError: assert 'overall_score' in {'components': {'bias': {'risk_level': 'unknown', 'score': 0.2, 'weighted_score': 0.03200000000000001}, 'deception': {... 'weighted_score': 0.2025}}, 'description': 'Minimal AI reliability concerns detected', 'level': 'low', 'score': 24.85}\n_____ TestValidationEngine.test_calculate_risk_assessment_invalid_scores ______\ntests\\unit\\test_comprehensive_validation.py:215: in test_calculate_risk_assessment_invalid_scores\n    assert \"overall_score\" in result\nE   AssertionError: assert 'overall_score' in {'components': {'bias': {'risk_level': 'unknown', 'score': 0.0, 'weighted_score': 0.0}, 'deception': {'risk_level': 'u... 0.0, 'weighted_score': 0.0}}, 'description': 'Minimal AI reliability concerns detected', 'level': 'low', 'score': 0.0}\n____________ TestValidationEngine.test_quantify_uncertainty_normal ____________\ntests\\unit\\test_comprehensive_validation.py:226: in test_quantify_uncertainty_normal\n    assert result > 0.3  # Should detect uncertainty\n    ^^^^^^^^^^^^^^^^^^^\nE   assert 0.15000000000000002 > 0.3\n________ TestValidationEngine.test_perform_statistical_analysis_normal ________\ntests\\unit\\test_comprehensive_validation.py:257: in test_perform_statistical_analysis_normal\n    assert \"word_count\" in result\nE   AssertionError: assert 'word_count' in {'avg_sentence_length': 11, 'lexical_diversity': 1.0, 'sentence_count': 2, 'sentence_length_variance': 0, ...}\n______ TestValidationEngine.test_perform_statistical_analysis_none_input ______\ntests\\unit\\test_comprehensive_validation.py:273: in test_perform_statistical_analysis_none_input\n    assert \"word_count\" in result\nE   AssertionError: assert 'word_count' in {'avg_sentence_length': 0, 'lexical_diversity': 0, 'sentence_count': 1, 'sentence_length_variance': 0, ...}\n____ TestValidationEngine.test_perform_statistical_analysis_integer_input _____\ntests\\unit\\test_comprehensive_validation.py:281: in test_perform_statistical_analysis_integer_input\n    assert \"word_count\" in result\nE   AssertionError: assert 'word_count' in {'avg_sentence_length': 1, 'lexical_diversity': 1.0, 'sentence_count': 1, 'sentence_length_variance': 0, ...}\n_____ TestValidationEngine.test_perform_statistical_analysis_empty_string _____\ntests\\unit\\test_comprehensive_validation.py:288: in test_perform_statistical_analysis_empty_string\n    assert \"word_count\" in result\nE   AssertionError: assert 'word_count' in {'avg_sentence_length': 0, 'lexical_diversity': 0, 'sentence_count': 1, 'sentence_length_variance': 0, ...}\n____ TestValidationEngine.test_perform_statistical_analysis_very_long_text ____\ntests\\unit\\test_comprehensive_validation.py:297: in test_perform_statistical_analysis_very_long_text\n    assert \"word_count\" in result\nE   AssertionError: assert 'word_count' in {'avg_sentence_length': 5, 'lexical_diversity': 0.001, 'sentence_count': 1001, 'sentence_length_variance': 0, ...}\n_______ TestValidationEngine.test_calculate_confidence_intervals_normal _______\ntests\\unit\\test_comprehensive_validation.py:307: in test_calculate_confidence_intervals_normal\n    assert \"lower_bound\" in result\nE   AssertionError: assert 'lower_bound' in {'complexity_ci': {'lower': 0.7, 'upper': 1.1}, 'consistency_ci': {'lower': 0.9, 'upper': 1.0}, 'response_length_ci': {'lower': 0.8, 'upper': 1.2}}\n____ TestValidationEngine.test_calculate_confidence_intervals_none_inputs _____\ntests\\unit\\test_comprehensive_validation.py:320: in test_calculate_confidence_intervals_none_inputs\n    assert \"lower_bound\" in result\nE   AssertionError: assert 'lower_bound' in {'complexity_ci': {'lower': 0.7, 'upper': 1.1}, 'consistency_ci': {'lower': 0.9, 'upper': 1.0}, 'response_length_ci': {'lower': 0.8, 'upper': 1.2}}\n__________ TestValidationEngine.test_extract_word_frequencies_normal __________\ntests\\unit\\test_comprehensive_validation.py:332: in test_extract_word_frequencies_normal\n    assert result[\"the\"] == 2\nE   assert 3 == 2\n________ TestValidationEngine.test_extract_word_frequencies_none_input ________\ntests\\unit\\test_comprehensive_validation.py:338: in test_extract_word_frequencies_none_input\n    result = self.validator._extract_word_frequencies(None)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntrustguard\\validation.py:420: in _extract_word_frequencies\n    words = re.findall(r'\\b[a-zA-Z]{2,}\\b', text.lower())\n                                            ^^^^^^^^^^\nE   AttributeError: 'NoneType' object has no attribute 'lower'\n______ TestValidationEngine.test_extract_word_frequencies_integer_input _______\ntests\\unit\\test_comprehensive_validation.py:345: in test_extract_word_frequencies_integer_input\n    result = self.validator._extract_word_frequencies(123)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntrustguard\\validation.py:420: in _extract_word_frequencies\n    words = re.findall(r'\\b[a-zA-Z]{2,}\\b', text.lower())\n                                            ^^^^^^^^^^\nE   AttributeError: 'int' object has no attribute 'lower'\n______________ TestValidationEngine.test_performance_large_text _______________\ntests\\unit\\test_comprehensive_validation.py:363: in test_performance_large_text\n    assert \"overall_score\" in result\nE   AssertionError: assert 'overall_score' in {'confidence_intervals': {'complexity_ci': {'lower': 0.7, 'upper': 1.1}, 'consistency_ci': {'lower': 0.9, 'upper': 1.0...'avg_sentence_length': 5, 'lexical_diversity': 0.001, 'sentence_count': 1001, 'sentence_length_variance': 0, ...}, ...}\n_______________ TestValidationEngine.test_concurrent_validation _______________\ntests\\unit\\test_comprehensive_validation.py:402: in test_concurrent_validation\n    assert \"overall_score\" in result\nE   AssertionError: assert 'overall_score' in {'confidence_intervals': {'complexity_ci': {'lower': 0.7, 'upper': 1.1}, 'consistency_ci': {'lower': 0.9, 'upper': 1.0...s': {'avg_sentence_length': 6, 'lexical_diversity': 1.0, 'sentence_count': 2, 'sentence_length_variance': 0, ...}, ...}\n________________ TestEdgeCasesValidation.test_very_long_texts _________________\ntests\\unit\\test_comprehensive_validation.py:424: in test_very_long_texts\n    assert \"overall_score\" in result\nE   AssertionError: assert 'overall_score' in {'confidence_intervals': {'complexity_ci': {'lower': 0.7, 'upper': 1.1}, 'consistency_ci': {'lower': 0.9, 'upper': 1.0...s': {'avg_sentence_length': 1, 'lexical_diversity': 1.0, 'sentence_count': 1, 'sentence_length_variance': 0, ...}, ...}\n____________ TestEdgeCasesValidation.test_special_characters_only _____________\ntests\\unit\\test_comprehensive_validation.py:434: in test_special_characters_only\n    assert \"overall_score\" in result\nE   AssertionError: assert 'overall_score' in {'confidence_intervals': {'complexity_ci': {'lower': 0.7, 'upper': 1.1}, 'consistency_ci': {'lower': 0.9, 'upper': 1.0...s': {'avg_sentence_length': 1, 'lexical_diversity': 1.0, 'sentence_count': 4, 'sentence_length_variance': 0, ...}, ...}\n------------------------------ Captured log call ------------------------------\nWARNING  trustguard.validation:validation.py:375 Consistency check failed: division by zero\n_________________ TestEdgeCasesValidation.test_unicode_texts __________________\ntests\\unit\\test_comprehensive_validation.py:443: in test_unicode_texts\n    assert \"overall_score\" in result\nE   AssertionError: assert 'overall_score' in {'confidence_intervals': {'complexity_ci': {'lower': 0.7, 'upper': 1.1}, 'consistency_ci': {'lower': 0.9, 'upper': 1.0...ce_length': 7, 'lexical_diversity': 0.9230769230769231, 'sentence_count': 3, 'sentence_length_variance': 32, ...}, ...}\n___________________ TestEdgeCasesValidation.test_json_texts ___________________\ntests\\unit\\test_comprehensive_validation.py:456: in test_json_texts\n    assert \"overall_score\" in result\nE   AssertionError: assert 'overall_score' in {'confidence_intervals': {'complexity_ci': {'lower': 0.7, 'upper': 1.1}, 'consistency_ci': {'lower': 0.9, 'upper': 1.0...': {'avg_sentence_length': 10, 'lexical_diversity': 1.0, 'sentence_count': 1, 'sentence_length_variance': 0, ...}, ...}\n___________________ TestEdgeCasesValidation.test_html_texts ___________________\ntests\\unit\\test_comprehensive_validation.py:465: in test_html_texts\n    assert \"overall_score\" in result\nE   AssertionError: assert 'overall_score' in {'confidence_intervals': {'complexity_ci': {'lower': 0.7, 'upper': 1.1}, 'consistency_ci': {'lower': 0.9, 'upper': 1.0...s': {'avg_sentence_length': 2, 'lexical_diversity': 0.5, 'sentence_count': 1, 'sentence_length_variance': 0, ...}, ...}\n___________________ TestEdgeCasesValidation.test_sql_texts ____________________\ntests\\unit\\test_comprehensive_validation.py:474: in test_sql_texts\n    assert \"overall_score\" in result\nE   AssertionError: assert 'overall_score' in {'confidence_intervals': {'complexity_ci': {'lower': 0.7, 'upper': 1.1}, 'consistency_ci': {'lower': 0.9, 'upper': 1.0...': {'avg_sentence_length': 12, 'lexical_diversity': 1.0, 'sentence_count': 1, 'sentence_length_variance': 0, ...}, ...}\n________________ TestEdgeCasesValidation.test_malicious_texts _________________\ntests\\unit\\test_comprehensive_validation.py:483: in test_malicious_texts\n    assert \"overall_score\" in result\nE   AssertionError: assert 'overall_score' in {'confidence_intervals': {'complexity_ci': {'lower': 0.7, 'upper': 1.1}, 'consistency_ci': {'lower': 0.9, 'upper': 1.0...nce_length': 1, 'lexical_diversity': 0.7142857142857143, 'sentence_count': 1, 'sentence_length_variance': 0, ...}, ...}\n_________________ TestEdgeCasesValidation.test_numeric_texts __________________\ntests\\unit\\test_comprehensive_validation.py:492: in test_numeric_texts\n    assert \"overall_score\" in result\nE   AssertionError: assert 'overall_score' in {'confidence_intervals': {'complexity_ci': {'lower': 0.7, 'upper': 1.1}, 'consistency_ci': {'lower': 0.9, 'upper': 1.0...s': {'avg_sentence_length': 1, 'lexical_diversity': 1.0, 'sentence_count': 1, 'sentence_length_variance': 0, ...}, ...}\n------------------------------ Captured log call ------------------------------\nWARNING  trustguard.validation:validation.py:375 Consistency check failed: division by zero\n______________ TestEdgeCasesValidation.test_mixed_content_texts _______________\ntests\\unit\\test_comprehensive_validation.py:501: in test_mixed_content_texts\n    assert \"overall_score\" in result\nE   AssertionError: assert 'overall_score' in {'confidence_intervals': {'complexity_ci': {'lower': 0.7, 'upper': 1.1}, 'consistency_ci': {'lower': 0.9, 'upper': 1.0...{'avg_sentence_length': 3.5, 'lexical_diversity': 1.0, 'sentence_count': 3, 'sentence_length_variance': 0.5, ...}, ...}\n============================== warnings summary ===============================\n..\\..\\AppData\\Local\\Packages\\PythonSoftwareFoundation.Python.3.13_qbz5n2kfra8p0\\LocalCache\\local-packages\\Python313\\site-packages\\pythonjsonlogger\\jsonlogger.py:11\n  C:\\Users\\jimmy\\AppData\\Local\\Packages\\PythonSoftwareFoundation.Python.3.13_qbz5n2kfra8p0\\LocalCache\\local-packages\\Python313\\site-packages\\pythonjsonlogger\\jsonlogger.py:11: DeprecationWarning: pythonjsonlogger.jsonlogger has been moved to pythonjsonlogger.json\n    warnings.warn(\n\n-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html\n--------------------------------- JSON report ---------------------------------\nreport saved to: /tmp/pytest_report.json\n=========================== short test summary info ===========================\nFAILED tests/unit/test_comprehensive_validation.py::TestSafeTextInputValidation::test_various_input_types\nFAILED tests/unit/test_comprehensive_validation.py::TestValidationEngine::test_perform_mathematical_validation_normal\nFAILED tests/unit/test_comprehensive_validation.py::TestValidationEngine::test_perform_mathematical_validation_none_inputs\nFAILED tests/unit/test_comprehensive_validation.py::TestValidationEngine::test_perform_mathematical_validation_integer_inputs\nFAILED tests/unit/test_comprehensive_validation.py::TestValidationEngine::test_perform_mathematical_validation_empty_strings\nFAILED tests/unit/test_comprehensive_validation.py::TestValidationEngine::test_calculate_risk_assessment_normal\nFAILED tests/unit/test_comprehensive_validation.py::TestValidationEngine::test_calculate_risk_assessment_none_input\nFAILED tests/unit/test_comprehensive_validation.py::TestValidationEngine::test_calculate_risk_assessment_empty_dict\nFAILED tests/unit/test_comprehensive_validation.py::TestValidationEngine::test_calculate_risk_assessment_high_scores\nFAILED tests/unit/test_comprehensive_validation.py::TestValidationEngine::test_calculate_risk_assessment_mixed_scores\nFAILED tests/unit/test_comprehensive_validation.py::TestValidationEngine::test_calculate_risk_assessment_invalid_scores\nFAILED tests/unit/test_comprehensive_validation.py::TestValidationEngine::test_quantify_uncertainty_normal\nFAILED tests/unit/test_comprehensive_validation.py::TestValidationEngine::test_perform_statistical_analysis_normal\nFAILED tests/unit/test_comprehensive_validation.py::TestValidationEngine::test_perform_statistical_analysis_none_input\nFAILED tests/unit/test_comprehensive_validation.py::TestValidationEngine::test_perform_statistical_analysis_integer_input\nFAILED tests/unit/test_comprehensive_validation.py::TestValidationEngine::test_perform_statistical_analysis_empty_string\nFAILED tests/unit/test_comprehensive_validation.py::TestValidationEngine::test_perform_statistical_analysis_very_long_text\nFAILED tests/unit/test_comprehensive_validation.py::TestValidationEngine::test_calculate_confidence_intervals_normal\nFAILED tests/unit/test_comprehensive_validation.py::TestValidationEngine::test_calculate_confidence_intervals_none_inputs\nFAILED tests/unit/test_comprehensive_validation.py::TestValidationEngine::test_extract_word_frequencies_normal\nFAILED tests/unit/test_comprehensive_validation.py::TestValidationEngine::test_extract_word_frequencies_none_input\nFAILED tests/unit/test_comprehensive_validation.py::TestValidationEngine::test_extract_word_frequencies_integer_input\nFAILED tests/unit/test_comprehensive_validation.py::TestValidationEngine::test_performance_large_text\nFAILED tests/unit/test_comprehensive_validation.py::TestValidationEngine::test_concurrent_validation\nFAILED tests/unit/test_comprehensive_validation.py::TestEdgeCasesValidation::test_very_long_texts\nFAILED tests/unit/test_comprehensive_validation.py::TestEdgeCasesValidation::test_special_characters_only\nFAILED tests/unit/test_comprehensive_validation.py::TestEdgeCasesValidation::test_unicode_texts\nFAILED tests/unit/test_comprehensive_validation.py::TestEdgeCasesValidation::test_json_texts\nFAILED tests/unit/test_comprehensive_validation.py::TestEdgeCasesValidation::test_html_texts\nFAILED tests/unit/test_comprehensive_validation.py::TestEdgeCasesValidation::test_sql_texts\nFAILED tests/unit/test_comprehensive_validation.py::TestEdgeCasesValidation::test_malicious_texts\nFAILED tests/unit/test_comprehensive_validation.py::TestEdgeCasesValidation::test_numeric_texts\nFAILED tests/unit/test_comprehensive_validation.py::TestEdgeCasesValidation::test_mixed_content_texts\n=================== 33 failed, 8 passed, 1 warning in 1.08s ===================\n",
          "stderr": ""
        },
        "tests/unit/test_comprehensive_constitutional.py": {
          "passed": 0,
          "failed": 0,
          "skipped": 0,
          "return_code": 1,
          "stdout": "============================= test session starts =============================\nplatform win32 -- Python 3.13.8, pytest-8.4.2, pluggy-1.6.0\nrootdir: C:\\Users\\jimmy\\.cursor\\trust-guard\nconfigfile: pyproject.toml\nplugins: anyio-4.11.0, asyncio-1.2.0, cov-7.0.0, json-report-1.5.0, metadata-3.1.1\nasyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function\ncollected 39 items\n\ntests\\unit\\test_comprehensive_constitutional.py .FF.FFFFFFF.FFF......... [ 61%]\n.FFFFFFFFFFFFFF                                                          [100%]\n\n================================== FAILURES ===================================\n__________ TestSafeTextInputConstitutional.test_various_input_types ___________\ntests\\unit\\test_comprehensive_constitutional.py:38: in test_various_input_types\n    assert result == expected\nE   AssertionError: assert 'string' == 'hello'\nE     \nE     - hello\nE     + string\n_______________ TestConstitutionalPrompting.test_initialization _______________\ntests\\unit\\test_comprehensive_constitutional.py:61: in test_initialization\n    assert pattern in self.constitutional.constitutional_guidelines\nE   AssertionError: assert 'drift' in {'bias': ['Present information from multiple perspectives when appropriate.', 'Avoid absolute claims that could margin...nces.', 'Focus on specific, actionable security measures.', 'Avoid false comfort statements about protection levels.']}\nE    +  where {'bias': ['Present information from multiple perspectives when appropriate.', 'Avoid absolute claims that could margin...nces.', 'Focus on specific, actionable security measures.', 'Avoid false comfort statements about protection levels.']} = <trustguard.constitutional.ConstitutionalPrompting object at 0x00000250ECCA4050>.constitutional_guidelines\nE    +    where <trustguard.constitutional.ConstitutionalPrompting object at 0x00000250ECCA4050> = <test_comprehensive_constitutional.TestConstitutionalPrompting object at 0x00000250ECB80410>.constitutional\n__________ TestConstitutionalPrompting.test_apply_mitigation_normal ___________\ntests\\unit\\test_comprehensive_constitutional.py:78: in test_apply_mitigation_normal\n    assert \"original_text\" in result\nE   assert 'original_text' in {'confidence_improvement': 0.15000000000000002, 'prompts_used': [\"Before stating any facts, confirm they are based on ...ation', 'guideline_injection'], 'text': 'This is definitely (based on available knowledge) correct without any doubt.'}\n________ TestConstitutionalPrompting.test_apply_mitigation_none_input _________\ntests\\unit\\test_comprehensive_constitutional.py:99: in test_apply_mitigation_none_input\n    assert \"original_text\" in result\nE   assert 'original_text' in {'confidence_improvement': 0.15000000000000002, 'prompts_used': [\"Before stating any facts, confirm they are based on ...nty is limited.\"], 'techniques': ['constitutional_prompting', 'pattern_mitigation', 'guideline_injection'], 'text': ''}\n_______ TestConstitutionalPrompting.test_apply_mitigation_integer_input _______\ntests\\unit\\test_comprehensive_constitutional.py:109: in test_apply_mitigation_integer_input\n    assert \"original_text\" in result\nE   assert 'original_text' in {'confidence_improvement': 0.15000000000000002, 'prompts_used': [\"Before stating any facts, confirm they are based on ... is limited.\"], 'techniques': ['constitutional_prompting', 'pattern_mitigation', 'guideline_injection'], 'text': '123'}\n______ TestConstitutionalPrompting.test_apply_mitigation_empty_patterns _______\ntests\\unit\\test_comprehensive_constitutional.py:119: in test_apply_mitigation_empty_patterns\n    assert result[\"original_text\"] == text\n           ^^^^^^^^^^^^^^^^^^^^^^^\nE   KeyError: 'original_text'\n_____ TestConstitutionalPrompting.test_apply_mitigation_invalid_patterns ______\ntests\\unit\\test_comprehensive_constitutional.py:129: in test_apply_mitigation_invalid_patterns\n    assert result[\"original_text\"] == text\n           ^^^^^^^^^^^^^^^^^^^^^^^\nE   KeyError: 'original_text'\n_____ TestConstitutionalPrompting.test_apply_mitigation_multiple_patterns _____\ntests\\unit\\test_comprehensive_constitutional.py:140: in test_apply_mitigation_multiple_patterns\n    assert result[\"original_text\"] == text\n           ^^^^^^^^^^^^^^^^^^^^^^^\nE   KeyError: 'original_text'\n___ TestConstitutionalPrompting.test_apply_mitigation_different_risk_levels ___\ntests\\unit\\test_comprehensive_constitutional.py:153: in test_apply_mitigation_different_risk_levels\n    assert \"original_text\" in result\nE   assert 'original_text' in {'confidence_improvement': 0.1, 'prompts_used': [\"Before stating any facts, confirm they are based on verifiable knowl...g', 'pattern_mitigation', 'guideline_injection'], 'text': 'This is definitely (based on available knowledge) correct.'}\n_ TestConstitutionalPrompting.test_generate_constitutional_prompts_none_patterns _\ntests\\unit\\test_comprehensive_constitutional.py:173: in test_generate_constitutional_prompts_none_patterns\n    result = self.constitutional.generate_constitutional_prompts(None, \"medium\")\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntrustguard\\constitutional.py:109: in generate_constitutional_prompts\n    for pattern in patterns:\n                   ^^^^^^^^\nE   TypeError: 'NoneType' object is not iterable\n_ TestConstitutionalPrompting.test_generate_constitutional_prompts_empty_patterns _\ntests\\unit\\test_comprehensive_constitutional.py:183: in test_generate_constitutional_prompts_empty_patterns\n    assert len(result) == 0\nE   AssertionError: assert 1 == 0\nE    +  where 1 = len(['General Constitutional Guidelines:\\n- Maintain high standards of accuracy and truthfulness.\\n- Prioritize factual co...ow.\\n- When in doubt, express appropriate uncertainty.\\n- Consider the broader context and implications of responses.'])\n_ TestConstitutionalPrompting.test_generate_constitutional_prompts_invalid_patterns _\ntests\\unit\\test_comprehensive_constitutional.py:190: in test_generate_constitutional_prompts_invalid_patterns\n    assert len(result) == 0\nE   AssertionError: assert 1 == 0\nE    +  where 1 = len(['General Constitutional Guidelines:\\n- Maintain high standards of accuracy and truthfulness.\\n- Prioritize factual co...ow.\\n- When in doubt, express appropriate uncertainty.\\n- Consider the broader context and implications of responses.'])\n___________ TestConstitutionalPrompting.test_performance_large_text ___________\ntests\\unit\\test_comprehensive_constitutional.py:304: in test_performance_large_text\n    assert \"mitigated_text\" in result\nE   assert 'mitigated_text' in {'confidence_improvement': 0.15000000000000002, 'prompts_used': [\"Before stating any facts, confirm they are based on ...a test sentence. This is a test sentence. This is a test sentence. This is a test sentence. This is a test sentence. '}\n___________ TestConstitutionalPrompting.test_concurrent_mitigation ____________\ntests\\unit\\test_comprehensive_constitutional.py:342: in test_concurrent_mitigation\n    assert \"mitigated_text\" in result\nE   assert 'mitigated_text' in {'confidence_improvement': 0.15000000000000002, 'prompts_used': [\"Before stating any facts, confirm they are based on ...ues': ['constitutional_prompting', 'pattern_mitigation', 'guideline_injection'], 'text': 'This is test text number 0.'}\n_______________ TestEdgeCasesConstitutional.test_very_long_text _______________\ntests\\unit\\test_comprehensive_constitutional.py:363: in test_very_long_text\n    assert \"mitigated_text\" in result\nE   assert 'mitigated_text' in {'confidence_improvement': 0.15000000000000002, 'prompts_used': [\"Before stating any facts, confirm they are based on ...AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'}\n__________ TestEdgeCasesConstitutional.test_special_characters_only ___________\ntests\\unit\\test_comprehensive_constitutional.py:372: in test_special_characters_only\n    assert \"mitigated_text\" in result\nE   assert 'mitigated_text' in {'confidence_improvement': 0.15000000000000002, 'prompts_used': [\"Before stating any facts, confirm they are based on ...': ['constitutional_prompting', 'pattern_mitigation', 'guideline_injection'], 'text': '!@#$%^&*()_+-=[]{}|;\\':\",./<>?'}\n________________ TestEdgeCasesConstitutional.test_unicode_text ________________\ntests\\unit\\test_comprehensive_constitutional.py:380: in test_unicode_text\n    assert \"mitigated_text\" in result\nE   assert 'mitigated_text' in {'confidence_improvement': 0.15000000000000002, 'prompts_used': [\"Before stating any facts, confirm they are based on ...rompting', 'pattern_mitigation', 'guideline_injection'], 'text': 'Hello \\u4e16\\u754c! \\U0001f30d This is a test with \\xe9mojis and \\xe0cc\\xe9nts.'}\n_________________ TestEdgeCasesConstitutional.test_json_text __________________\ntests\\unit\\test_comprehensive_constitutional.py:390: in test_json_text\n    assert \"mitigated_text\" in result\nE   assert 'mitigated_text' in {'confidence_improvement': 0.15000000000000002, 'prompts_used': [\"Before stating any facts, confirm they are based on ...rompting', 'pattern_mitigation', 'guideline_injection'], 'text': '{\"key\": \"value\", \"number\": 123, \"array\": [1, 2, 3]}'}\n_________________ TestEdgeCasesConstitutional.test_html_text __________________\ntests\\unit\\test_comprehensive_constitutional.py:398: in test_html_text\n    assert \"mitigated_text\" in result\nE   assert 'mitigated_text' in {'confidence_improvement': 0.15000000000000002, 'prompts_used': [\"Before stating any facts, confirm they are based on ...pting', 'pattern_mitigation', 'guideline_injection'], 'text': '<html><body><h1>Title</h1><p>Content</p></body></html>'}\n__________________ TestEdgeCasesConstitutional.test_sql_text __________________\ntests\\unit\\test_comprehensive_constitutional.py:406: in test_sql_text\n    assert \"mitigated_text\" in result\nE   assert 'mitigated_text' in {'confidence_improvement': 0.15000000000000002, 'prompts_used': [\"Before stating any facts, confirm they are based on ...rompting', 'pattern_mitigation', 'guideline_injection'], 'text': 'SELECT * FROM users WHERE id = 1; DROP TABLE users;'}\n_______________ TestEdgeCasesConstitutional.test_malicious_text _______________\ntests\\unit\\test_comprehensive_constitutional.py:414: in test_malicious_text\n    assert \"mitigated_text\" in result\nE   assert 'mitigated_text' in {'confidence_improvement': 0.15000000000000002, 'prompts_used': [\"Before stating any facts, confirm they are based on ...s': ['constitutional_prompting', 'pattern_mitigation', 'guideline_injection'], 'text': \"<script>alert('xss')</script>\"}\n________________ TestEdgeCasesConstitutional.test_numeric_text ________________\ntests\\unit\\test_comprehensive_constitutional.py:422: in test_numeric_text\n    assert \"mitigated_text\" in result\nE   assert 'mitigated_text' in {'confidence_improvement': 0.15000000000000002, 'prompts_used': [\"Before stating any facts, confirm they are based on ...mited.\"], 'techniques': ['constitutional_prompting', 'pattern_mitigation', 'guideline_injection'], 'text': '123456789'}\n_____________ TestEdgeCasesConstitutional.test_mixed_content_text _____________\ntests\\unit\\test_comprehensive_constitutional.py:430: in test_mixed_content_text\n    assert \"mitigated_text\" in result\nE   assert 'mitigated_text' in {'confidence_improvement': 0.15000000000000002, 'prompts_used': [\"Before stating any facts, confirm they are based on ...ques': ['constitutional_prompting', 'pattern_mitigation', 'guideline_injection'], 'text': 'Hello 123 world! @#$%^&*()'}\n__________ TestEdgeCasesConstitutional.test_all_patterns_mitigation ___________\ntests\\unit\\test_comprehensive_constitutional.py:443: in test_all_patterns_mitigation\n    assert \"mitigated_text\" in result\nE   assert 'mitigated_text' in {'confidence_improvement': 0.8, 'prompts_used': [\"Before stating any facts, confirm they are based on verifiable knowl...e most complete information available within current knowledge constraints.\\n\\n[End of Trust Guard Enhanced Response]'}\n_____________ TestEdgeCasesConstitutional.test_invalid_risk_level _____________\ntests\\unit\\test_comprehensive_constitutional.py:452: in test_invalid_risk_level\n    assert \"mitigated_text\" in result\nE   assert 'mitigated_text' in {'confidence_improvement': 0.1, 'prompts_used': [\"Before stating any facts, confirm they are based on verifiable knowl... 'techniques': ['constitutional_prompting', 'pattern_mitigation', 'guideline_injection'], 'text': 'This is some text.'}\n______________ TestEdgeCasesConstitutional.test_none_risk_level _______________\ntests\\unit\\test_comprehensive_constitutional.py:461: in test_none_risk_level\n    assert \"mitigated_text\" in result\nE   assert 'mitigated_text' in {'confidence_improvement': 0.1, 'prompts_used': [\"Before stating any facts, confirm they are based on verifiable knowl... 'techniques': ['constitutional_prompting', 'pattern_mitigation', 'guideline_injection'], 'text': 'This is some text.'}\n============================== warnings summary ===============================\n..\\..\\AppData\\Local\\Packages\\PythonSoftwareFoundation.Python.3.13_qbz5n2kfra8p0\\LocalCache\\local-packages\\Python313\\site-packages\\pythonjsonlogger\\jsonlogger.py:11\n  C:\\Users\\jimmy\\AppData\\Local\\Packages\\PythonSoftwareFoundation.Python.3.13_qbz5n2kfra8p0\\LocalCache\\local-packages\\Python313\\site-packages\\pythonjsonlogger\\jsonlogger.py:11: DeprecationWarning: pythonjsonlogger.jsonlogger has been moved to pythonjsonlogger.json\n    warnings.warn(\n\n-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html\n--------------------------------- JSON report ---------------------------------\nreport saved to: /tmp/pytest_report.json\n=========================== short test summary info ===========================\nFAILED tests/unit/test_comprehensive_constitutional.py::TestSafeTextInputConstitutional::test_various_input_types\nFAILED tests/unit/test_comprehensive_constitutional.py::TestConstitutionalPrompting::test_initialization\nFAILED tests/unit/test_comprehensive_constitutional.py::TestConstitutionalPrompting::test_apply_mitigation_normal\nFAILED tests/unit/test_comprehensive_constitutional.py::TestConstitutionalPrompting::test_apply_mitigation_none_input\nFAILED tests/unit/test_comprehensive_constitutional.py::TestConstitutionalPrompting::test_apply_mitigation_integer_input\nFAILED tests/unit/test_comprehensive_constitutional.py::TestConstitutionalPrompting::test_apply_mitigation_empty_patterns\nFAILED tests/unit/test_comprehensive_constitutional.py::TestConstitutionalPrompting::test_apply_mitigation_invalid_patterns\nFAILED tests/unit/test_comprehensive_constitutional.py::TestConstitutionalPrompting::test_apply_mitigation_multiple_patterns\nFAILED tests/unit/test_comprehensive_constitutional.py::TestConstitutionalPrompting::test_apply_mitigation_different_risk_levels\nFAILED tests/unit/test_comprehensive_constitutional.py::TestConstitutionalPrompting::test_generate_constitutional_prompts_none_patterns\nFAILED tests/unit/test_comprehensive_constitutional.py::TestConstitutionalPrompting::test_generate_constitutional_prompts_empty_patterns\nFAILED tests/unit/test_comprehensive_constitutional.py::TestConstitutionalPrompting::test_generate_constitutional_prompts_invalid_patterns\nFAILED tests/unit/test_comprehensive_constitutional.py::TestConstitutionalPrompting::test_performance_large_text\nFAILED tests/unit/test_comprehensive_constitutional.py::TestConstitutionalPrompting::test_concurrent_mitigation\nFAILED tests/unit/test_comprehensive_constitutional.py::TestEdgeCasesConstitutional::test_very_long_text\nFAILED tests/unit/test_comprehensive_constitutional.py::TestEdgeCasesConstitutional::test_special_characters_only\nFAILED tests/unit/test_comprehensive_constitutional.py::TestEdgeCasesConstitutional::test_unicode_text\nFAILED tests/unit/test_comprehensive_constitutional.py::TestEdgeCasesConstitutional::test_json_text\nFAILED tests/unit/test_comprehensive_constitutional.py::TestEdgeCasesConstitutional::test_html_text\nFAILED tests/unit/test_comprehensive_constitutional.py::TestEdgeCasesConstitutional::test_sql_text\nFAILED tests/unit/test_comprehensive_constitutional.py::TestEdgeCasesConstitutional::test_malicious_text\nFAILED tests/unit/test_comprehensive_constitutional.py::TestEdgeCasesConstitutional::test_numeric_text\nFAILED tests/unit/test_comprehensive_constitutional.py::TestEdgeCasesConstitutional::test_mixed_content_text\nFAILED tests/unit/test_comprehensive_constitutional.py::TestEdgeCasesConstitutional::test_all_patterns_mitigation\nFAILED tests/unit/test_comprehensive_constitutional.py::TestEdgeCasesConstitutional::test_invalid_risk_level\nFAILED tests/unit/test_comprehensive_constitutional.py::TestEdgeCasesConstitutional::test_none_risk_level\n================== 26 failed, 13 passed, 1 warning in 0.74s ===================\n",
          "stderr": ""
        },
        "tests/unit/test_comprehensive_metrics.py": {
          "passed": 0,
          "failed": 0,
          "skipped": 0,
          "return_code": 1,
          "stdout": "============================= test session starts =============================\nplatform win32 -- Python 3.13.8, pytest-8.4.2, pluggy-1.6.0\nrootdir: C:\\Users\\jimmy\\.cursor\\trust-guard\nconfigfile: pyproject.toml\nplugins: anyio-4.11.0, asyncio-1.2.0, cov-7.0.0, json-report-1.5.0, metadata-3.1.1\nasyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function\ncollected 43 items\n\ntests\\unit\\test_comprehensive_metrics.py ..F.F..F..F.........FF......... [ 72%]\nFFF.FFFFF...                                                             [100%]\n\n================================== FAILURES ===================================\n_____________ TestReliabilityMetrics.test_record_detection_normal _____________\ntests\\unit\\test_comprehensive_metrics.py:54: in test_record_detection_normal\n    assert self.metrics.pattern_counts[\"bias\"] == 1\nE   assert 0 == 1\n_________ TestReliabilityMetrics.test_record_detection_invalid_input __________\ntests\\unit\\test_comprehensive_metrics.py:65: in test_record_detection_invalid_input\n    self.metrics.record_detection(\"invalid\", 0.1)\ntrustguard\\metrics.py:157: in record_detection\n    detections = detection_result.get(\"detections\", {})\n                 ^^^^^^^^^^^^^^^^^^^^\nE   AttributeError: 'str' object has no attribute 'get'\n______ TestReliabilityMetrics.test_record_detection_invalid_pattern_data ______\ntests\\unit\\test_comprehensive_metrics.py:95: in test_record_detection_invalid_pattern_data\n    self.metrics.record_detection(detection_result, 0.1)\ntrustguard\\metrics.py:164: in record_detection\n    if score > 0.5:\n       ^^^^^^^^^^^\nE   TypeError: '>' not supported between instances of 'str' and 'float'\n_________ TestReliabilityMetrics.test_record_validation_invalid_input _________\ntests\\unit\\test_comprehensive_metrics.py:118: in test_record_validation_invalid_input\n    self.metrics.record_validation(\"invalid\")\ntrustguard\\metrics.py:186: in record_validation\n    risk_level = validation_result.get(\"risk_level\", \"unknown\")\n                 ^^^^^^^^^^^^^^^^^^^^^\nE   AttributeError: 'str' object has no attribute 'get'\n______ TestReliabilityMetrics.test_get_patterns_detected_today_with_data ______\ntests\\unit\\test_comprehensive_metrics.py:219: in test_get_patterns_detected_today_with_data\n    assert count == 2\nE   assert 1 == 2\n_______________ TestReliabilityMetrics.test_get_metrics_summary _______________\ntests\\unit\\test_comprehensive_metrics.py:242: in test_get_metrics_summary\n    assert \"pattern_counts\" in summary\nE   AssertionError: assert 'pattern_counts' in {'average_risk_score': 2.0, 'last_updated': 1760327253.389701, 'patterns_detected_today': 1, 'prometheus_available': True, ...}\n____________ TestReliabilityMetrics.test_edge_case_very_low_scores ____________\ntests\\unit\\test_comprehensive_metrics.py:394: in test_edge_case_very_low_scores\n    assert self.metrics.pattern_counts[\"hallucination\"] == 1\nE   assert 0 == 1\n___________ TestReliabilityMetrics.test_edge_case_mixed_risk_levels ___________\ntests\\unit\\test_comprehensive_metrics.py:411: in test_edge_case_mixed_risk_levels\n    assert self.metrics.pattern_counts[\"bias\"] == 1\nE   assert 0 == 1\n_____________ TestReliabilityMetrics.test_edge_case_all_patterns ______________\ntests\\unit\\test_comprehensive_metrics.py:433: in test_edge_case_all_patterns\n    assert self.metrics.pattern_counts[pattern] == 1\nE   assert 0 == 1\n_______________ TestEdgeCasesMetrics.test_unicode_pattern_names _______________\ntests\\unit\\test_comprehensive_metrics.py:473: in test_unicode_pattern_names\n    assert self.metrics.pattern_counts[\"hallucination_\\u4e16\\u754c\"] == 1\nE   assert 0 == 1\n________ TestEdgeCasesMetrics.test_special_characters_in_pattern_names ________\ntests\\unit\\test_comprehensive_metrics.py:488: in test_special_characters_in_pattern_names\n    assert self.metrics.pattern_counts[\"pattern@#$%\"] == 1\nE   assert 0 == 1\n___________ TestEdgeCasesMetrics.test_none_values_in_detection_data ___________\ntests\\unit\\test_comprehensive_metrics.py:500: in test_none_values_in_detection_data\n    self.metrics.record_detection(detection_result, 0.1)\ntrustguard\\metrics.py:164: in record_detection\n    if score > 0.5:\n       ^^^^^^^^^^^\nE   TypeError: '>' not supported between instances of 'NoneType' and 'float'\n__________ TestEdgeCasesMetrics.test_empty_strings_in_detection_data __________\ntests\\unit\\test_comprehensive_metrics.py:514: in test_empty_strings_in_detection_data\n    self.metrics.record_detection(detection_result, 0.1)\ntrustguard\\metrics.py:164: in record_detection\n    if score > 0.5:\n       ^^^^^^^^^^^\nE   TypeError: '>' not supported between instances of 'str' and 'float'\n_______________ TestEdgeCasesMetrics.test_nested_detection_data _______________\ntests\\unit\\test_comprehensive_metrics.py:537: in test_nested_detection_data\n    assert self.metrics.pattern_counts[\"hallucination\"] == 1\nE   assert 0 == 1\n============================== warnings summary ===============================\n..\\..\\AppData\\Local\\Packages\\PythonSoftwareFoundation.Python.3.13_qbz5n2kfra8p0\\LocalCache\\local-packages\\Python313\\site-packages\\pythonjsonlogger\\jsonlogger.py:11\n  C:\\Users\\jimmy\\AppData\\Local\\Packages\\PythonSoftwareFoundation.Python.3.13_qbz5n2kfra8p0\\LocalCache\\local-packages\\Python313\\site-packages\\pythonjsonlogger\\jsonlogger.py:11: DeprecationWarning: pythonjsonlogger.jsonlogger has been moved to pythonjsonlogger.json\n    warnings.warn(\n\n-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html\n--------------------------------- JSON report ---------------------------------\nreport saved to: /tmp/pytest_report.json\n=========================== short test summary info ===========================\nFAILED tests/unit/test_comprehensive_metrics.py::TestReliabilityMetrics::test_record_detection_normal\nFAILED tests/unit/test_comprehensive_metrics.py::TestReliabilityMetrics::test_record_detection_invalid_input\nFAILED tests/unit/test_comprehensive_metrics.py::TestReliabilityMetrics::test_record_detection_invalid_pattern_data\nFAILED tests/unit/test_comprehensive_metrics.py::TestReliabilityMetrics::test_record_validation_invalid_input\nFAILED tests/unit/test_comprehensive_metrics.py::TestReliabilityMetrics::test_get_patterns_detected_today_with_data\nFAILED tests/unit/test_comprehensive_metrics.py::TestReliabilityMetrics::test_get_metrics_summary\nFAILED tests/unit/test_comprehensive_metrics.py::TestReliabilityMetrics::test_edge_case_very_low_scores\nFAILED tests/unit/test_comprehensive_metrics.py::TestReliabilityMetrics::test_edge_case_mixed_risk_levels\nFAILED tests/unit/test_comprehensive_metrics.py::TestReliabilityMetrics::test_edge_case_all_patterns\nFAILED tests/unit/test_comprehensive_metrics.py::TestEdgeCasesMetrics::test_unicode_pattern_names\nFAILED tests/unit/test_comprehensive_metrics.py::TestEdgeCasesMetrics::test_special_characters_in_pattern_names\nFAILED tests/unit/test_comprehensive_metrics.py::TestEdgeCasesMetrics::test_none_values_in_detection_data\nFAILED tests/unit/test_comprehensive_metrics.py::TestEdgeCasesMetrics::test_empty_strings_in_detection_data\nFAILED tests/unit/test_comprehensive_metrics.py::TestEdgeCasesMetrics::test_nested_detection_data\n================== 14 failed, 29 passed, 1 warning in 0.76s ===================\n",
          "stderr": ""
        },
        "tests/unit/test_comprehensive_logging.py": {
          "passed": 0,
          "failed": 0,
          "skipped": 0,
          "return_code": 1,
          "stdout": "============================= test session starts =============================\nplatform win32 -- Python 3.13.8, pytest-8.4.2, pluggy-1.6.0\nrootdir: C:\\Users\\jimmy\\.cursor\\trust-guard\nconfigfile: pyproject.toml\nplugins: anyio-4.11.0, asyncio-1.2.0, cov-7.0.0, json-report-1.5.0, metadata-3.1.1\nasyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function\ncollected 36 items\n\ntests\\unit\\test_comprehensive_logging.py .....FF........................ [ 86%]\n.....                                                                    [100%]\n\n================================== FAILURES ===================================\n_______________ TestTraceContext.test_set_trace_context_partial _______________\ntests\\unit\\test_comprehensive_logging.py:91: in test_set_trace_context_partial\n    assert context[\"span_id\"] is None\nE   AssertionError: assert 'test-span-456' is None\n_____________ TestTraceContext.test_set_trace_context_none_values _____________\ntests\\unit\\test_comprehensive_logging.py:106: in test_set_trace_context_none_values\n    assert context[\"trace_id\"] is None\nE   AssertionError: assert 'test-trace-123' is None\n============================== warnings summary ===============================\n..\\..\\AppData\\Local\\Packages\\PythonSoftwareFoundation.Python.3.13_qbz5n2kfra8p0\\LocalCache\\local-packages\\Python313\\site-packages\\pythonjsonlogger\\jsonlogger.py:11\n  C:\\Users\\jimmy\\AppData\\Local\\Packages\\PythonSoftwareFoundation.Python.3.13_qbz5n2kfra8p0\\LocalCache\\local-packages\\Python313\\site-packages\\pythonjsonlogger\\jsonlogger.py:11: DeprecationWarning: pythonjsonlogger.jsonlogger has been moved to pythonjsonlogger.json\n    warnings.warn(\n\n-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html\n--------------------------------- JSON report ---------------------------------\nreport saved to: /tmp/pytest_report.json\n=========================== short test summary info ===========================\nFAILED tests/unit/test_comprehensive_logging.py::TestTraceContext::test_set_trace_context_partial\nFAILED tests/unit/test_comprehensive_logging.py::TestTraceContext::test_set_trace_context_none_values\n=================== 2 failed, 34 passed, 1 warning in 0.60s ===================\n",
          "stderr": ""
        },
        "tests/unit/test_comprehensive_error_handling.py": {
          "passed": 0,
          "failed": 0,
          "skipped": 0,
          "return_code": 1,
          "stdout": "============================= test session starts =============================\nplatform win32 -- Python 3.13.8, pytest-8.4.2, pluggy-1.6.0\nrootdir: C:\\Users\\jimmy\\.cursor\\trust-guard\nconfigfile: pyproject.toml\nplugins: anyio-4.11.0, asyncio-1.2.0, cov-7.0.0, json-report-1.5.0, metadata-3.1.1\nasyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function\ncollected 31 items\n\ntests\\unit\\test_comprehensive_error_handling.py F.......F.F..FFFFFF..... [ 77%]\nF.F....                                                                  [100%]\n\n================================== FAILURES ===================================\n_ TestSafeTextInputErrorHandling.test_safe_text_input_with_exception_raising_object _\ntests\\unit\\test_comprehensive_error_handling.py:32: in test_safe_text_input_with_exception_raising_object\n    result = _safe_text_input(obj)\n             ^^^^^^^^^^^^^^^^^^^^^\ntrustguard\\core.py:26: in _safe_text_input\n    return str(text)\n           ^^^^^^^^^\ntests\\unit\\test_comprehensive_error_handling.py:29: in __str__\n    raise ValueError(\"Cannot convert to string\")\nE   ValueError: Cannot convert to string\n_ TestCoreDetectorErrorHandling.test_detect_all_patterns_with_exception_in_detector _\ntests\\unit\\test_comprehensive_error_handling.py:186: in test_detect_all_patterns_with_exception_in_detector\n    result = self.detector.detect_all_patterns(\"Test text\")\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntrustguard\\core.py:128: in detect_all_patterns\n    detections[\"hallucination\"] = self.detect_hallucination(text, context, metadata)\n                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nC:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.13_3.13.2288.0_x64__qbz5n2kfra8p0\\Lib\\unittest\\mock.py:1169: in __call__\n    return self._mock_call(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nC:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.13_3.13.2288.0_x64__qbz5n2kfra8p0\\Lib\\unittest\\mock.py:1173: in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nC:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.13_3.13.2288.0_x64__qbz5n2kfra8p0\\Lib\\unittest\\mock.py:1228: in _execute_mock_call\n    raise effect\nE   Exception: Simulated detector failure\n_ TestValidationEngineErrorHandling.test_calculate_risk_assessment_with_corrupted_detections _\ntests\\unit\\test_comprehensive_error_handling.py:234: in test_calculate_risk_assessment_with_corrupted_detections\n    result = self.validator.calculate_risk_assessment(detections)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntrustguard\\validation.py:127: in calculate_risk_assessment\n    for pattern_name, detection in pattern_detections.items():\n                                   ^^^^^^^^^^^^^^^^^^^^^^^^\nE   AttributeError: 'str' object has no attribute 'items'\n_ TestConstitutionalPromptingErrorHandling.test_apply_mitigation_with_corrupted_inputs _\ntests\\unit\\test_comprehensive_error_handling.py:315: in test_apply_mitigation_with_corrupted_inputs\n    assert \"original_text\" in result\nE   assert 'original_text' in {'confidence_improvement': 0.15000000000000002, 'prompts_used': [\"Before stating any facts, confirm they are based on ....\"], 'techniques': ['constitutional_prompting', 'pattern_mitigation', 'guideline_injection'], 'text': \"b'binary_text'\"}\n_ TestConstitutionalPromptingErrorHandling.test_apply_mitigation_with_corrupted_patterns _\ntests\\unit\\test_comprehensive_error_handling.py:333: in test_apply_mitigation_with_corrupted_patterns\n    assert \"original_text\" in result\nE   AssertionError: assert 'original_text' in {'confidence_improvement': 0.8, 'prompts_used': [], 'techniques': ['constitutional_prompting', 'pattern_mitigation', 'guideline_injection'], 'text': 'Test text'}\n_ TestConstitutionalPromptingErrorHandling.test_apply_mitigation_with_memory_pressure _\ntests\\unit\\test_comprehensive_error_handling.py:348: in test_apply_mitigation_with_memory_pressure\n    assert \"mitigated_text\" in result\nE   assert 'mitigated_text' in {'confidence_improvement': 0.15000000000000002, 'prompts_used': [\"Before stating any facts, confirm they are based on ...AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'}\n_ TestConstitutionalPromptingErrorHandling.test_constitutional_prompting_with_concurrent_access _\ntests\\unit\\test_comprehensive_error_handling.py:385: in test_constitutional_prompting_with_concurrent_access\n    assert \"mitigated_text\" in result\nE   assert 'mitigated_text' in {'confidence_improvement': 0.15000000000000002, 'prompts_used': [\"Before stating any facts, confirm they are based on ... 'techniques': ['constitutional_prompting', 'pattern_mitigation', 'guideline_injection'], 'text': 'Text from worker 0'}\n_____ TestMetricsErrorHandling.test_record_detection_with_corrupted_data ______\ntests\\unit\\test_comprehensive_error_handling.py:407: in test_record_detection_with_corrupted_data\n    self.metrics.record_detection(corrupted_data, 0.1)\ntrustguard\\metrics.py:157: in record_detection\n    detections = detection_result.get(\"detections\", {})\n                 ^^^^^^^^^^^^^^^^^^^^\nE   AttributeError: 'str' object has no attribute 'get'\n_____ TestMetricsErrorHandling.test_record_validation_with_corrupted_data _____\ntests\\unit\\test_comprehensive_error_handling.py:424: in test_record_validation_with_corrupted_data\n    self.metrics.record_validation(corrupted_data)\ntrustguard\\metrics.py:186: in record_validation\n    risk_level = validation_result.get(\"risk_level\", \"unknown\")\n                 ^^^^^^^^^^^^^^^^^^^^^\nE   AttributeError: 'str' object has no attribute 'get'\n_ TestHealthCheckerErrorHandling.test_health_check_with_corrupted_components __\ntests\\unit\\test_comprehensive_error_handling.py:589: in test_health_check_with_corrupted_components\n    result = self.health_checker.perform_comprehensive_check(corrupted_components)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntrustguard\\health.py:203: in perform_comprehensive_check\n    if 'detector' in components:\n       ^^^^^^^^^^^^^^^^^^^^^^^^\nE   TypeError: argument of type 'object' is not iterable\n__ TestHealthCheckerErrorHandling.test_health_check_with_failing_components ___\ntests\\unit\\test_comprehensive_error_handling.py:629: in test_health_check_with_failing_components\n    assert failing_component_result is not None\nE   assert None is not None\n============================== warnings summary ===============================\n..\\..\\AppData\\Local\\Packages\\PythonSoftwareFoundation.Python.3.13_qbz5n2kfra8p0\\LocalCache\\local-packages\\Python313\\site-packages\\pythonjsonlogger\\jsonlogger.py:11\n  C:\\Users\\jimmy\\AppData\\Local\\Packages\\PythonSoftwareFoundation.Python.3.13_qbz5n2kfra8p0\\LocalCache\\local-packages\\Python313\\site-packages\\pythonjsonlogger\\jsonlogger.py:11: DeprecationWarning: pythonjsonlogger.jsonlogger has been moved to pythonjsonlogger.json\n    warnings.warn(\n\ntests/unit/test_comprehensive_error_handling.py::TestAuthenticationErrorHandling::test_authentication_with_corrupted_api_key\ntests/unit/test_comprehensive_error_handling.py::TestAuthenticationErrorHandling::test_authentication_with_corrupted_jwt_token\ntests/unit/test_comprehensive_error_handling.py::TestSystemWideErrorHandling::test_system_graceful_degradation_with_multiple_failures\ntests/unit/test_comprehensive_error_handling.py::TestSystemWideErrorHandling::test_system_with_resource_exhaustion\ntests/unit/test_comprehensive_error_handling.py::TestSystemWideErrorHandling::test_system_with_network_failures\ntests/unit/test_comprehensive_error_handling.py::TestSystemWideErrorHandling::test_system_with_concurrent_failures\n  C:\\Users\\jimmy\\.cursor\\trust-guard\\trustguard\\config.py:69: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n    self._secrets_rotation[\"secret_key\"] = datetime.utcnow()\n\ntests/unit/test_comprehensive_error_handling.py::TestAuthenticationErrorHandling::test_authentication_with_corrupted_api_key\ntests/unit/test_comprehensive_error_handling.py::TestAuthenticationErrorHandling::test_authentication_with_corrupted_jwt_token\ntests/unit/test_comprehensive_error_handling.py::TestSystemWideErrorHandling::test_system_graceful_degradation_with_multiple_failures\ntests/unit/test_comprehensive_error_handling.py::TestSystemWideErrorHandling::test_system_with_resource_exhaustion\ntests/unit/test_comprehensive_error_handling.py::TestSystemWideErrorHandling::test_system_with_network_failures\ntests/unit/test_comprehensive_error_handling.py::TestSystemWideErrorHandling::test_system_with_concurrent_failures\n  C:\\Users\\jimmy\\.cursor\\trust-guard\\trustguard\\config.py:75: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n    self._secrets_rotation[\"jwt_secret\"] = datetime.utcnow()\n\ntests/unit/test_comprehensive_error_handling.py::TestAuthenticationErrorHandling::test_authentication_with_corrupted_api_key\ntests/unit/test_comprehensive_error_handling.py::TestAuthenticationErrorHandling::test_authentication_with_corrupted_jwt_token\ntests/unit/test_comprehensive_error_handling.py::TestSystemWideErrorHandling::test_system_graceful_degradation_with_multiple_failures\ntests/unit/test_comprehensive_error_handling.py::TestSystemWideErrorHandling::test_system_with_resource_exhaustion\ntests/unit/test_comprehensive_error_handling.py::TestSystemWideErrorHandling::test_system_with_network_failures\ntests/unit/test_comprehensive_error_handling.py::TestSystemWideErrorHandling::test_system_with_concurrent_failures\n  C:\\Users\\jimmy\\.cursor\\trust-guard\\trustguard\\config.py:81: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n    self._secrets_rotation[\"encryption_key\"] = datetime.utcnow()\n\ntests/unit/test_comprehensive_error_handling.py::TestAuthenticationErrorHandling::test_authentication_with_corrupted_api_key\ntests/unit/test_comprehensive_error_handling.py::TestAuthenticationErrorHandling::test_authentication_with_corrupted_jwt_token\ntests/unit/test_comprehensive_error_handling.py::TestSystemWideErrorHandling::test_system_graceful_degradation_with_multiple_failures\ntests/unit/test_comprehensive_error_handling.py::TestSystemWideErrorHandling::test_system_with_resource_exhaustion\ntests/unit/test_comprehensive_error_handling.py::TestSystemWideErrorHandling::test_system_with_network_failures\ntests/unit/test_comprehensive_error_handling.py::TestSystemWideErrorHandling::test_system_with_concurrent_failures\n  C:\\Users\\jimmy\\.cursor\\trust-guard\\trustguard\\config.py:114: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n    return datetime.utcnow() - last_rotation > rotation_interval\n\ntests/unit/test_comprehensive_error_handling.py::TestAuthenticationErrorHandling::test_authentication_with_corrupted_api_key\ntests/unit/test_comprehensive_error_handling.py::TestAuthenticationErrorHandling::test_authentication_with_corrupted_jwt_token\ntests/unit/test_comprehensive_error_handling.py::TestSystemWideErrorHandling::test_system_graceful_degradation_with_multiple_failures\ntests/unit/test_comprehensive_error_handling.py::TestSystemWideErrorHandling::test_system_with_resource_exhaustion\ntests/unit/test_comprehensive_error_handling.py::TestSystemWideErrorHandling::test_system_with_network_failures\ntests/unit/test_comprehensive_error_handling.py::TestSystemWideErrorHandling::test_system_with_concurrent_failures\n  C:\\Users\\jimmy\\.cursor\\trust-guard\\trustguard\\auth.py:146: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n    expires_at = datetime.utcnow() + timedelta(days=expires_in_days)\n\ntests/unit/test_comprehensive_error_handling.py::TestAuthenticationErrorHandling::test_authentication_with_corrupted_api_key\ntests/unit/test_comprehensive_error_handling.py::TestAuthenticationErrorHandling::test_authentication_with_corrupted_jwt_token\ntests/unit/test_comprehensive_error_handling.py::TestSystemWideErrorHandling::test_system_graceful_degradation_with_multiple_failures\ntests/unit/test_comprehensive_error_handling.py::TestSystemWideErrorHandling::test_system_with_resource_exhaustion\ntests/unit/test_comprehensive_error_handling.py::TestSystemWideErrorHandling::test_system_with_network_failures\ntests/unit/test_comprehensive_error_handling.py::TestSystemWideErrorHandling::test_system_with_concurrent_failures\n  C:\\Users\\jimmy\\.cursor\\trust-guard\\trustguard\\auth.py:153: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n    created_at=datetime.utcnow(),\n\ntests/unit/test_comprehensive_error_handling.py: 24 warnings\n  C:\\Users\\jimmy\\.cursor\\trust-guard\\trustguard\\health.py:39: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n    self.timestamp = datetime.utcnow()\n\ntests/unit/test_comprehensive_error_handling.py::TestHealthCheckerErrorHandling::test_health_check_with_corrupted_components\ntests/unit/test_comprehensive_error_handling.py::TestHealthCheckerErrorHandling::test_health_check_with_corrupted_components\ntests/unit/test_comprehensive_error_handling.py::TestHealthCheckerErrorHandling::test_health_check_with_corrupted_components\ntests/unit/test_comprehensive_error_handling.py::TestHealthCheckerErrorHandling::test_health_check_with_missing_components\ntests/unit/test_comprehensive_error_handling.py::TestHealthCheckerErrorHandling::test_health_check_with_failing_components\ntests/unit/test_comprehensive_error_handling.py::TestSystemWideErrorHandling::test_system_with_network_failures\n  C:\\Users\\jimmy\\.cursor\\trust-guard\\trustguard\\health.py:228: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n    \"timestamp\": datetime.utcnow().isoformat(),\n\n-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html\n--------------------------------- JSON report ---------------------------------\nreport saved to: /tmp/pytest_report.json\n=========================== short test summary info ===========================\nFAILED tests/unit/test_comprehensive_error_handling.py::TestSafeTextInputErrorHandling::test_safe_text_input_with_exception_raising_object\nFAILED tests/unit/test_comprehensive_error_handling.py::TestCoreDetectorErrorHandling::test_detect_all_patterns_with_exception_in_detector\nFAILED tests/unit/test_comprehensive_error_handling.py::TestValidationEngineErrorHandling::test_calculate_risk_assessment_with_corrupted_detections\nFAILED tests/unit/test_comprehensive_error_handling.py::TestConstitutionalPromptingErrorHandling::test_apply_mitigation_with_corrupted_inputs\nFAILED tests/unit/test_comprehensive_error_handling.py::TestConstitutionalPromptingErrorHandling::test_apply_mitigation_with_corrupted_patterns\nFAILED tests/unit/test_comprehensive_error_handling.py::TestConstitutionalPromptingErrorHandling::test_apply_mitigation_with_memory_pressure\nFAILED tests/unit/test_comprehensive_error_handling.py::TestConstitutionalPromptingErrorHandling::test_constitutional_prompting_with_concurrent_access\nFAILED tests/unit/test_comprehensive_error_handling.py::TestMetricsErrorHandling::test_record_detection_with_corrupted_data\nFAILED tests/unit/test_comprehensive_error_handling.py::TestMetricsErrorHandling::test_record_validation_with_corrupted_data\nFAILED tests/unit/test_comprehensive_error_handling.py::TestHealthCheckerErrorHandling::test_health_check_with_corrupted_components\nFAILED tests/unit/test_comprehensive_error_handling.py::TestHealthCheckerErrorHandling::test_health_check_with_failing_components\n================= 11 failed, 20 passed, 67 warnings in 9.04s ==================\n",
          "stderr": ""
        }
      },
      "summary": {
        "total_passed": 0,
        "total_failed": 0,
        "total_skipped": 0,
        "total_tests": 0,
        "success_rate": 0
      }
    },
    "integration_tests": {
      "health_endpoint": {
        "status": "PASS",
        "status_code": 200,
        "response_time_ms": 2169.534,
        "response_data": {
          "status": "healthy",
          "version": "1.0.0",
          "components": {
            "detector": true,
            "validator": true,
            "constitutional": true,
            "metrics": true
          },
          "metrics": {
            "uptime_seconds": 5274.885803222656,
            "cpu_usage": 78.3,
            "memory_mb": 5284.36328125,
            "patterns_detected_today": 0,
            "average_risk_score": 1.0
          },
          "system_memory": {
            "used_mb": 5284.48,
            "available_mb": 696.89,
            "percentage": 88.3
          }
        }
      },
      "liveness_probe": {
        "status": "FAIL",
        "status_code": 404,
        "response_time_ms": 2044.0990000000002
      },
      "readiness_probe": {
        "status": "FAIL",
        "status_code": 404,
        "response_time_ms": 2055.345
      },
      "detailed_health": {
        "status": "FAIL",
        "status_code": 404,
        "response_time_ms": 2034.5819999999999,
        "response_data": {
          "detail": "Not Found"
        }
      },
      "metrics_endpoint": {
        "status": "PASS",
        "status_code": 200,
        "response_time_ms": 2115.401,
        "content_type": "text/plain; version=1.0.0; charset=utf-8"
      },
      "detect_endpoint": {
        "status": "PASS",
        "status_code": 200,
        "response_time_ms": 2048.614
      }
    }
  },
  "health_checks": {
    "basic_health": {
      "status": "PASS",
      "overall_status": "healthy",
      "uptime_seconds": 0,
      "components": {
        "detector": true,
        "validator": true,
        "constitutional": true,
        "metrics": true
      }
    },
    "detailed_health": {
      "status": "FAIL",
      "status_code": 404
    },
    "tracer_health": {
      "status": "FAIL",
      "status_code": 404
    }
  },
  "log_analysis": {
    "log_sources": [],
    "error_patterns": [],
    "performance_metrics": [],
    "security_events": []
  },
  "performance_metrics": {
    "/health": {
      "status": "PASS",
      "response_time_ms": 2161.031484603882,
      "status_code": 200,
      "content_length": 341
    },
    "/health/live": {
      "status": "FAIL",
      "response_time_ms": 2058.8138103485107,
      "status_code": 404,
      "content_length": 22
    },
    "/health/ready": {
      "status": "FAIL",
      "response_time_ms": 2043.973445892334,
      "status_code": 404,
      "content_length": 22
    },
    "/metrics": {
      "status": "PASS",
      "response_time_ms": 2067.3091411590576,
      "status_code": 200,
      "content_length": 14458
    },
    "load_test": {
      "status": "PASS",
      "total_requests": 10,
      "successful_requests": 10,
      "failed_requests": 0,
      "total_time_seconds": 21.511751890182495,
      "requests_per_second": 0.46486218561138143
    }
  },
  "summary": {
    "overall_status": "FAIL",
    "total_tests": 6,
    "passed_tests": 3,
    "failed_tests": 3,
    "success_rate": 50.0,
    "health_status": "UNHEALTHY",
    "performance_status": "DEGRADED"
  }
}